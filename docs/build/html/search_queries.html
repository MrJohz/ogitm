<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Searching In GitDB &mdash; OGitM 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="OGitM 0.0.1 documentation" href="index.html" />
    <link rel="next" title="OGitM API Documentation" href="apidocs/api_docs.html" />
    <link rel="prev" title="The Tutorial" href="tutorial.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="apidocs/api_docs.html" title="OGitM API Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="The Tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OGitM 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="searching-in-gitdb">
<h1>Searching In GitDB<a class="headerlink" href="#searching-in-gitdb" title="Permalink to this headline">¶</a></h1>
<p>Similarly to MongoDB, GitDB queries can either be really simple checks of
equality, or more complex tests of a value using Python&#8217;s extensive set of
methods and functions.  This page will describe how to use the search
functions, for information on writing your own, see
<a class="reference internal" href="apidocs/search_functions.html#module-ogitm.gitdb.search_functions" title="ogitm.gitdb.search_functions"><code class="xref py py-mod docutils literal"><span class="pre">gitdb.search_functions</span></code></a>.  There is also an extensive testing suite
for searching in the <code class="docutils literal"><span class="pre">tests/test_gitdb.py</span></code> file.</p>
<p>We will use a model that looks like this:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span><span class="p">;</span> <span class="n">db_directory</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ogitm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">ogitm</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="n">db_directory</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">ogitm</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">age</span> <span class="o">=</span> <span class="n">ogitm</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">has_hair</span> <span class="o">=</span> <span class="n">ogitm</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">Boolean</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bob</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">93</span><span class="p">,</span> <span class="n">has_hair</span><span class="o">=</span><span class="k">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bert</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Bert&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">has_hair</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bex</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Bex&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">has_hair</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bub</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Bubba&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">3243</span><span class="p">,</span> <span class="n">has_hair</span><span class="o">=</span><span class="k">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="comparison">
<h2>Comparison<a class="headerlink" href="#comparison" title="Permalink to this headline">¶</a></h2>
<p>The comparison operators (<code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, and <code class="docutils literal"><span class="pre">==</span></code>) are
supported with aliases.  Generally, the query <code class="docutils literal"><span class="pre">a={'&gt;':</span> <span class="pre">b}</span></code> will return all
values of <code class="docutils literal"><span class="pre">a</span></code> such that <code class="docutils literal"><span class="pre">a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="23%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Shorthand</th>
<th class="head">Longhand</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">&gt;</span></code></td>
<td><code class="docutils literal"><span class="pre">'gt'</span></code></td>
<td><code class="docutils literal"><span class="pre">'greater-than'</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">&lt;</span></code></td>
<td><code class="docutils literal"><span class="pre">'lt'</span></code></td>
<td><code class="docutils literal"><span class="pre">'less-than'</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">&gt;=</span></code></td>
<td><code class="docutils literal"><span class="pre">'gte'</span></code></td>
<td><code class="docutils literal"><span class="pre">'greater-than-equal'</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">&lt;=</span></code></td>
<td><code class="docutils literal"><span class="pre">'lte'</span></code></td>
<td><code class="docutils literal"><span class="pre">'less-than-equal'</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">==</span></code></td>
<td><code class="docutils literal"><span class="pre">'eq'</span></code></td>
<td><code class="docutils literal"><span class="pre">'equal'</span></code></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;lt&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;gte&#39;</span><span class="p">:</span> <span class="mi">32</span><span class="p">}))</span>
<span class="go">3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Note that this also works for any</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># other type with a partial ordering</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;lt&#39;</span><span class="p">:</span> <span class="s">&#39;Bf&#39;</span><span class="p">}))</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># &#39;eq&#39; will work for any two equivalent items</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;eq&#39;</span><span class="p">:</span> <span class="s">&#39;Bert&#39;</span><span class="p">})</span> <span class="o">==</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Bert&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="existence">
<h2>Existence<a class="headerlink" href="#existence" title="Permalink to this headline">¶</a></h2>
<p>Testing for existence isn&#8217;t usually necessary when using models, as (assuming
that you only use the model to insert documents), you know that the only fields
that will exist will be the fields you inserted.  It is more useful when using
arbitrary documents with the raw GitDB instance.</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;exists&#39;</span><span class="p">:</span> <span class="k">True</span><span class="p">}))</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;exists&#39;</span><span class="p">:</span> <span class="k">False</span><span class="p">}))</span>
<span class="go">0</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Searching In GitDB</a><ul>
<li><a class="reference internal" href="#comparison">Comparison</a></li>
<li><a class="reference internal" href="#existence">Existence</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">The Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="apidocs/api_docs.html"
                        title="next chapter">OGitM API Documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/search_queries.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Jonathan Frere.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.2</a>
      
      |
      <a href="_sources/search_queries.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>